<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamento</title>
    <link rel="stylesheet" href="index.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <nav class="navheader">
            <a href="index.html" class="logo">Adote+</a>
            <ul class="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link">Início</a></li>
                <li class="nav-item"><a href="adocao.html" class="nav-link">Adoção</a></li>
                <li class="nav-item"><a href="agendamento.html" class="nav-link">Agendamento</a></li>
                <li class="nav-item"><a href="contato.html" class="nav-link">Contato</a></li>
            </ul>
            <div class="hamburguer">
                <span class="h"></span>
                <span class="h"></span>
                <span class="h"></span>
            </div>
        </nav>
    </header>
    <main>
        <div class="container mt-5">
            <h2 class="text-center mb-3">Agendar visita</h2>
            <form id="agendamento-form">
                <div class="mb-3">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="nome" placeholder="Ex.: João da Silva" required>
                        <label for="nome">Nome <span class="text-danger">*</span></label>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-floating mb-3">
                        <input type="email" class="form-control" id="email" placeholder="Ex.: name@example.com"
                            required>
                        <label for="email">Endereço de e-mail <span class="text-danger">*</span></label>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-floating mb-3">
                        <input type="datetime-local" class="form-control" id="dataVisita" required>
                        <label for="dataVisita">Data da visita <span class="text-danger">*</span></label>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="telefone" placeholder="Ex.: (81) 98888-7777"
                            required>
                        <label for="telefone">Telefone/WhatsApp <span class="text-danger">*</span></label>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Agendar</button>
            </form>

            <h2 class="text-center mt-4 mb-3">Visitas agendadas</h2>
            <div class="table-responsive">
            <table class="table table-hover table-responsive">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Nome</th>
                        <th scope="col">E-mail</th>
                        <th scope="col">Data da visita</th>
                        <th scope="col">Agendado em</th>
                        <th scope="col">Telefone/WhatsApp</th>
                    </tr>
                </thead>
                <tbody>
                    <script>
                        function formatDate(date) {
                            const formatter = new Intl.DateTimeFormat('pt-BR', {
                                day: '2-digit',
                                month: '2-digit',
                                year: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit',
                                hour12: false,
                            });

                            const formattedDate = formatter.format(date);
                            return formattedDate.replace(',', ' às');
                        }

                        let agendamentosStr = localStorage.getItem("agendamentos");
                        let agendamentosArr = agendamentosStr ? JSON.parse(agendamentosStr) : [];

                        if (agendamentosArr.length > 0) {
                            for (let i = 0; i < agendamentosArr.length; i++) {
                                const agendamento = agendamentosArr[i];
                                document.write(
                                    `<tr>
                                        <th scope="row">${i + 1}</th>
                                        <td>${agendamento.name}</td>
                                        <td>${agendamento.email}</td>
                                        <td>${formatDate(new Date(agendamento.visitDate))}</td>
                                        <td>${formatDate(new Date(agendamento.date))}</td>
                                        <td>${agendamento.phone}</td>
                                    </tr>`
                                );
                            }
                        } else {
                            document.write(
                                `<tr class="text-center">
                                    <td colspan="6">Nenhuma agendamento encontrado.</td>
                                </tr>`
                            );
                        }
                    </script>
                </tbody>
            </table>
            </div>
        </div>
    </main>

    <footer>
        <p>© 2024 Doe Amor. Todos os direitos reservados.</p>
    </footer>

    <script src="index.js"></script>
</body>
</html>
